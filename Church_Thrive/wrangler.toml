name = "churchthrive"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "./app/.vercel/output/static"

[build]
command = "npm run build:shared && npm run build:web"

[build.upload]
format = "service-worker"

# Environment variables for Cloudflare Pages
# Note: Set these in Cloudflare Pages dashboard as secrets
[vars]
NODE_VERSION = "20"

# Optional: Custom domain configuration
# [[rules]]
# pattern = "churchthrive.kr/*"
# custom = true

# Site configuration for Next.js on Cloudflare
[site]
bucket = "./app/.vercel/output/static"

# For Next.js edge runtime compatibility
[env.production]
# Set these in Cloudflare Pages dashboard:
# NEXT_PUBLIC_SUPABASE_URL
# NEXT_PUBLIC_SUPABASE_ANON_KEY
# NEXT_PUBLIC_KAKAO_APP_KEY
# NEXT_PUBLIC_FCM_VAPID_KEY
# FCM_SERVER_KEY (secret)
# SUPABASE_SERVICE_ROLE_KEY (secret)

[env.preview]
# Preview environment settings
