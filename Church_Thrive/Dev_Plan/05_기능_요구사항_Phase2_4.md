# 05. 기능 요구사항 - Phase 2~4 확장 기능

---

## Phase 2 - Growth (Month 5-7)

### FR-STT: 한국어 음성→텍스트 변환 (P0)

**STT 파이프라인**:
```
[모바일/웹 녹음] → [오프라인 저장(IndexedDB)]
  → [Supabase Storage 업로드 (resumable)]
  → [Supabase Edge Function 트리거 (DB webhook)]
  → [Google Cloud STT API 호출 (1순위, $0.016/분)]
  → [폴백: Whisper API ($0.006/분) 또는 CLOVA (정확도 우선)]
  → [후처리: 성경용어 교정 + 구절 감지 + 문단 분리]
  → [Supabase DB 저장 + Realtime 알림 + FCM 푸시]
```

**STT 제공자 우선순위**:

| 순위 | 제공자 | 분당 비용 | 30분 설교 | 특징 |
|------|--------|----------|-----------|------|
| 1순위 | **Google Cloud STT** | $0.016 (~22원) | ~650원 | 월 60분 무료, 가장 경제적 |
| 2순위 | OpenAI Whisper API | $0.006 (~8원) | ~250원 | 한영 혼합 우수, 폴백용 |
| 3순위 | Naver CLOVA Speech | ~15원/초 | ~27,000원 | 한국어 최고 정확도, 비용 높음 |
| 디바이스 | Whisper.cpp | 무료 | 무료 | 오프라인 STT (정확도 낮음) |

**후처리 로직**:
- 성경 용어 사전 기반 교정 (예: "에베소" → "에베소서")
- 성경 구절 패턴 감지 및 자동 태깅
- 문단 분리 (화자 전환점 기반)
- 변환 완료 시 사용자에게 Realtime + FCM 알림

---

### FR-2-EXT: 전자결재 시스템 (P1)

**보고서 생성**:
- 교역자, 사무직원, 성도가 각각 보고서 작성 가능
- 보고서 유형: 사역보고, 행사보고, 재정보고, 심방보고, 기타
- 템플릿 기반 작성 + 자유 양식

**결재 라인 설정**:
```
[기안자] → [1차 검토자] → [2차 검토자] → [최종 승인자]
              ↓                ↓                ↓
          검토/수정         검토/수정        승인/반려/보류
```

- 교회별 결재 라인 구성 (다단계 가능)
- 기안 → 결재라인 자동 진행
- 승인/반려/보류 처리
- 반려 시 사유 작성 필수

**부서 참조 알림**:
- 결재 문서에 참조 부서 지정 가능
- 지정된 부서장에게 자동 알림 발송
- 참조 부서는 열람만 가능 (결재 권한 없음)

**결재 이력 관리**:
- 전체 결재 이력 조회
- 대기/진행중/완료/반려 현황 대시보드
- 결재 문서 검색 (키워드, 기간, 상태)

---

### FR-5: 재정관리 (P1)

- 헌금 기록 (십일조, 감사헌금, 건축헌금 등 항목별)
- 월별/분기별/연간 재정 보고서 자동 생성
- 헌금 증명서 발급 (연말정산용 PDF)
- 예산 편성 및 집행 관리
- 재정 접근 권한은 담당자만 (RBAC)

### FR-6: 주보 생성 (P1)

- 템플릿 기반 주보 작성 (드래그앤드롭)
- 예배 순서, 교회 소식, 기도제목 섹션
- PDF 내보내기 + 카카오톡 공유
- 교회 홈페이지 자동 게시 연동

### FR-5.5: 행사 관리 (P1)

- 교회 행사 일정 등록 (날짜, 시간, 장소, 설명)
- RSVP (참석 여부 확인) 기능
- 참석자 명단 관리
- 행사 알림 (푸시 + 알림톡)
- 반복 행사 설정

---

### FR-4: 훈련 프로젝트 관리 (P1)

교회에서 진행하는 훈련을 플랫폼에 등록하면 **프로젝트별로 통합 관리**:

**1. 공고/공지**
- 훈련 소개 페이지 (목적, 대상, 일정, 장소)
- 모집 안내 및 모집 기간 설정
- 일정 공지 및 변경 알림

**2. 참여신청**
- 온라인 신청 폼 (커스텀 필드 지원)
- 자격요건 자동 체크 (예: "세례 받은 교인만 신청 가능")
- 대기자 관리 (정원 초과 시 대기열)
- 신청 현황 실시간 확인

**3. 출결관리**
- 세션별(수업별) 출석 체크
- QR 체크인 + 수동 체크 지원
- 결석/지각 기록 및 알림

**4. 참여상황**
- 실시간 진행률 대시보드
- 과제 제출 기능 (텍스트/파일)
- 참여도 스코어 (출석률 + 과제 제출률)

**5. 수료관리**
- 수료 기준 설정 (출석률 80% 이상 등)
- 수료 기준 충족 자동 판정
- 디지털 수료증 발급 (PDF)

**6. 개인 교적카드 연동**
- 교인 프로필에 훈련 이력 자동 반영
  - 수료한 훈련 목록
  - 진행 중 훈련
  - 암송 현황
  - 통독 진행률

---

### FR-5.3: 사역부서 관리 (P1)

- 사역부서 생성 (청년부, 교육부, 선교부 등)
- 부서별 멤버 배정 및 역할
- 부서 활동 보고서 작성/제출
- 부서별 일정 관리
- 부서 간 협업 공간

---

### FR-7: 말씀 암송 (P1 - 자체 내장 기능)

**기본 기능**:
- 암송 구절 등록 (교회 지정 or 개인 선택)
- 웹+앱 연동 암송 체크 시스템
- 암송 진행률 대시보드 (개인/교회 전체)
- 교역자가 교회 전체 암송 현황 조회 가능

**단계별 암송 도우미**:
```
1단계: 전체 구절 표시 → 읽기
2단계: 일부 빈칸 → 채우기
3단계: 힌트만 → 작성
4단계: 완전 암기 → 처음부터 작성
```

**다국어 성경 지원**:
| 언어 | 번역본 |
|------|--------|
| 한국어 | 개역개정, 새번역 |
| 영어 | NIV, ESV, KJV |
| 일본어 | 新共同訳 |
| 중국어 | 和合本 |

- 같은 구절을 여러 언어로 동시 표시/암송 가능
- 언어 추가 확장 가능한 구조 (플러그인 방식)

**다국어 음성 듣기 (TTS)**:
- Google Cloud Text-to-Speech API 활용
  - 무료 월 400만 글자
  - 한/영/일/중 고품질 음성 지원
- 반복 재생, 속도 조절 (0.5x ~ 2x)
- 구절별 반복 기능
- 듣기+따라읽기 모드: TTS 음성 재생 → 사용자 따라읽기 → 다음 구절
- 오프라인 재생: 자주 듣는 구절 미리 캐싱

---

### FR-8: 말씀 통독 (P1 - 자체 내장 기능)

**통독 기능**:
- 성경 통독표 (1년/6개월/3개월 플랜)
- 매일 통독 분량 알림 + 체크
- 통독 진행률 시각화 (66권 완독 현황)
- 자체 내장 성경 읽기 기능 (개역개정, 새번역, NIV 등 다국어)
- 교회 전체 통독 캠페인 기능 (공동체 통독)

**필사 기능**:
- 성경 구절을 직접 타이핑하며 필사
- 필사 완료 체크
- 필사 노트 저장
- **필사 모드**:
  - 원문 보면서 따라쓰기
  - 원문 숨기고 기억으로 쓰기
- 필사 진행률 통계 (일별/주별/월별)

---

### 구독 결제 연동

- 토스페이먼츠 연동
- 카드 자동결제 (월간/연간)
- 결제 이력 관리
- 영수증 발급

---

## Phase 3 - Maturity (Month 8-10)

### FR-10: LVI 교회 건강 진단

- 50문항 7차원 평가 시스템
- 차원: 예배, 전도, 양육, 교제, 봉사, 선교, 리더십
- 레이더 차트 시각화
- 연도별 추이 비교
- 진단 결과 기반 개선 제안 (AI)

### 회의록 + 액션아이템 추적

- 회의 기록 작성 (참석자, 안건, 결정사항)
- 액션아이템 생성 → 담당자 배정 → 마감일 설정
- 액션아이템 완료 추적 대시보드

### BH21L 6역량 추적

- 성경적 리더십 6역량 평가
- 개인별 역량 프로필
- 성장 목표 설정 및 추적

### 봉사 스케줄링/로테이션

- 봉사팀 생성 (찬양팀, 안내팀, 주차팀 등)
- 자동 로테이션 스케줄 생성
- 봉사자 교대/대체 요청
- 봉사 이력 관리

### 문서 관리

- 교회 문서 중앙 저장소
- 폴더/태그 기반 분류
- 문서 공유 및 권한 설정
- 버전 관리

### 외부 연동

- Google Calendar / Naver Calendar 동기화
- SMS 발송 연동 (알림톡 보완)

---

## Phase 4 - Enterprise (Month 11-16)

### 멀티캠퍼스 지원
- 하나의 교회가 여러 캠퍼스를 운영하는 경우
- 캠퍼스별 독립 데이터 + 통합 리포트
- 캠퍼스 간 교인 이동 관리

### AI 추천 (LVI 기반)
- LVI 진단 결과 기반 맞춤 컨설팅 추천
- 유사 교회 벤치마크
- 개선 우선순위 AI 분석

### 컨설팅 플랫폼 통합
- ChurchThrive 컨설팅 서비스 앱 내 통합
- 컨설턴트 매칭
- 온라인 상담 예약

### API 공개
- RESTful API 제공
- 써드파티 연동 지원
- API 키 관리

### 화이트라벨
- 교단/대형교회를 위한 브랜딩 커스터마이징
- 로고, 색상, 도메인 커스텀

### 영어 지원 (재외동포)
- 영어 UI 번역
- 재외동포 교회 타겟

### 카카오페이 헌금
- 카카오페이 연동 온라인 헌금
- 헌금 내역 자동 기록
- 세금 증명서 연동
